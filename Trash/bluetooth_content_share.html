<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/></head><body><br>&lt;?php<br>session_start ();<br>require '<a href="http://connect.php">connect.php</a>';<br>require '<a href="http://item.php">item.php</a>';<br>if (isset ( $_GET ['id'] ) &amp;&amp; !isset($_POST['update'])) {<br><br>	$result = mysqli_query ( $con, 'select * from product where id=' . $_GET ['id'] );<br>	$product = mysqli_fetch_object ( $result );<br>	$item = new Item ();<br>	$item-&gt;id = $product-&gt;id;<br>	$item-&gt;name = $product-&gt;name;<br>	$item-&gt;price = $product-&gt;price;<br>	$item-&gt;quantity = 1;<br>	// Check product is existing in cart<br>	$index = - 1;<br>	if (isset ( $_SESSION ['cart'] )) {<br>		$cart = unserialize ( serialize ( $_SESSION ['cart'] ) );<br>		for($i = 0; $i &lt; count ( $cart ); $i ++)<br>		if ($cart [$i]-&gt;id == $_GET ['id']) {<br>			$index = $i;<br>			break;<br>		}<br>	}<br>	if ($index == - 1)<br>	$_SESSION ['cart'] [] = $item;<br>	else {<br>		$cart [$index]-&gt;quantity ++;<br>		$_SESSION ['cart'] = $cart;<br>	}<br>}<br><br>// Delete product in cart<br>if (isset ( $_GET ['index'] ) &amp;&amp; !isset($_POST['update'])) {<br>	$cart = unserialize ( serialize ( $_SESSION ['cart'] ) );<br>	unset ( $cart [$_GET ['index']] );<br>	$cart = array_values ( $cart );<br>	$_SESSION ['cart'] = $cart;<br>}<br><br>// Update quantity in cart<br>if(isset($_POST['update'])) {<br>	$arrQuantity = $_POST['quantity'];<br><br>	// Check validate quantity<br>	$valid = 1;<br>	for($i=0; $i&lt;count($arrQuantity); $i++)<br>	if(!is_numeric($arrQuantity[$i]) || $arrQuantity[$i] &lt; 1){<br>		$valid = 0;<br>		break;<br>	}<br>	if($valid==1){<br>		$cart = unserialize ( serialize ( $_SESSION ['cart'] ) );<br>		for($i = 0; $i &lt; count ( $cart ); $i ++) {<br>			$cart[$i]-&gt;quantity = $arrQuantity[$i];<br>		}<br>		$_SESSION ['cart'] = $cart;<br>	}<br>	else<br>		$error = 'Quantity is InValid';<br>}<br><br>?&gt;<br>&lt;?php echo isset($error) ? $error : ''; ?&gt;<br>&lt;form method="post"&gt;<br>	&lt;table cellpadding="2" cellspacing="2" border="1"&gt;<br>		&lt;tr&gt;<br>			&lt;th&gt;Option&lt;/th&gt;<br>			&lt;th&gt;Id&lt;/th&gt;<br>			&lt;th&gt;Name&lt;/th&gt;<br>			&lt;th&gt;Price&lt;/th&gt;<br>			&lt;th&gt;Quantity &lt;input type="image" src="images/<a href="http://save.png">save.png</a>"&gt; &lt;input<br>				type="hidden" name="update"&gt;<br>			&lt;/th&gt;<br>			&lt;th&gt;Sub Total&lt;/th&gt;<br>		&lt;/tr&gt;<br>		&lt;?php<br>		$cart = unserialize ( serialize ( $_SESSION ['cart'] ) );<br>		$s = 0;<br>		$index = 0;<br>		for($i = 0; $i &lt; count ( $cart ); $i ++) {<br>			$s += $cart [$i]-&gt;price * $cart [$i]-&gt;quantity;<br>			?&gt;<br>		&lt;tr&gt;<br>			&lt;td&gt;&lt;a href="<a href="http://cart.php?index=&lt;?php">cart.php?index=&lt;?php</a> echo $index; ?&gt;"<br>				onclick="return confirm('Are you sure?')"&gt;Delete&lt;/a&gt;&lt;/td&gt;<br>			&lt;td&gt;&lt;?php echo $cart[$i]-&gt;id; ?&gt;&lt;/td&gt;<br>			&lt;td&gt;&lt;?php echo $cart[$i]-&gt;name; ?&gt;&lt;/td&gt;<br>			&lt;td&gt;&lt;?php echo $cart[$i]-&gt;price; ?&gt;&lt;/td&gt;<br>			&lt;td&gt;&lt;input type="text" value="&lt;?php echo $cart[$i]-&gt;quantity; ?&gt;"<br>				style="width: 50px;" name="quantity[]"&gt;&lt;/td&gt;<br>			&lt;td&gt;&lt;?php echo $cart[$i]-&gt;price * $cart[$i]-&gt;quantity; ?&gt;&lt;/td&gt;<br>		&lt;/tr&gt;<br>		&lt;?php<br>		$index ++;<br>		}<br>		?&gt;<br>		&lt;tr&gt;<br>			&lt;td colspan="5" align="right"&gt;Sum&lt;/td&gt;<br>			&lt;td align="left"&gt;&lt;?php echo $s; ?&gt;&lt;/td&gt;<br>		&lt;/tr&gt;<br>	&lt;/table&gt;<br>&lt;/form&gt;<br>&lt;br&gt;<br>&lt;a href="<a href="http://index.php">index.php</a>"&gt;Continue Shopping&lt;/a&gt;</body></html>